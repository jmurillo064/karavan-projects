- route:
    id: route-test-timer
    autoStartup: false
    from:
      id: from-test-timer
      uri: timer
      parameters:
        timerName: test
        period: 10000
      steps:
        - log:
            id: log-timer-triggered
            message: Timer triggered - testing route
        - setBody:
            id: setBody-test
            expression:
              constant:
                id: constant-test
                expression: Route is working!
        - log:
            id: log-body
            message: "Body: ${body}"
- route:
    id: route-sqlserver-version
    autoStartup: false
    from:
      id: from-sqlserver-version
      uri: timer
      parameters:
        timerName: sqlserver-version-test
        period: 30000
      steps:
        - log:
            id: log-version-start
            message: Ejecutando consulta a SQL Server...
        - setHeader:
            id: setHeader-version-query
            name: CamelJdbcQuery
            expression:
              constant:
                id: constant-version-query
                expression: SELECT @@VERSION as version
        - to:
            id: to-version-query
            uri: jdbc
            parameters:
              dataSource: "#myDataSource"
              dataSourceName: myDataSource
        - log:
            id: log-version-result
            message: "Versión de SQL Server: ${body}"
- route:
    id: route-insert-test-data
    autoStartup: false
    from:
      id: from-insert-test
      uri: timer
      parameters:
        timerName: insert-test
        period: 45000
        repeatCount: 3
      steps:
        - log:
            id: log-insert-start
            message: Insertando datos de prueba en SQL Server...
        - setBody:
            id: setBody-test-data
            expression:
              simple:
                id: simple-test-data
                expression: Datos de prueba - ${date:now:HH:mm:ss}
        - setHeader:
            id: setHeader-insert-query
            name: CamelJdbcQuery
            expression:
              constant:
                id: constant-insert-query
                expression: >-
                  INSERT INTO dbo.contenido (contenido, fecha_procesamiento)
                  VALUES (?, GETDATE())
        - to:
            id: to-insert-data
            uri: jdbc
            parameters:
              dataSource: "#myDataSource"
              dataSourceName: myDataSource
        - log:
            id: log-insert-success
            message: "Datos insertados correctamente: ${body}"
- route:
    id: route-select-test-data
    autoStartup: false
    from:
      id: from-select-test
      uri: timer
      parameters:
        timerName: select-test
        period: 60000
      steps:
        - log:
            id: log-select-start
            message: Consultando datos de la tabla contenido...
        - setHeader:
            id: setHeader-select-query
            name: CamelJdbcQuery
            expression:
              constant:
                id: constant-select-query
                expression: >-
                  SELECT TOP 5 id, contenido, fecha_procesamiento FROM
                  dbo.contenido ORDER BY id DESC
        - to:
            id: to-select-data
            uri: jdbc
            parameters:
              dataSource: "#myDataSource"
              dataSourceName: myDataSource
        - log:
            id: log-select-result
            message: "Últimos registros: ${body}"
