- route:
    id: activemq-route-bd
    from:
      id: cola-salida
      description: Lectura salida
      uri: activemq
      parameters:
        destinationType: queue
        destinationName: salida
      steps:
        - log:
            id: log-salida
            description: Imprimir dato
            message: "Insertando en base: ${body}"
            loggingLevel: INFO
        - setHeader:
            id: set-salida
            description: Convertir body a header
            name: contenido
            expression:
              simple:
                id: simple-afda
                expression: ${body}
        - to:
            id: db-salida
            description: Insertar en bd
            uri: sql
            parameters:
              dataSource: "#myDataSource"
              query: INSERT INTO contenido (contenido) VALUES (:#contenido)
        - log:
            id: log-final
            description: Imprimir mensaje final
            message: "Insertado correctamente: ${header.contenido}"
